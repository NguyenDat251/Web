<!DOCTYPE html>
<html lang="en">

<head>
    <title>eShop</title>
    <% include partials/header.ejs %>
</head>

<body>

<% include partials/menu.ejs %>
<% include partials/siteBranding.ejs %>

<div class="mainmenu-area">
    <div class="container">
        <div class="row">
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">

                </ul>

            </div>

        </div>
    </div>
</div> <!-- End mainmenu area -->

<div class="product-big-title-area">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="product-bit-title text-center">
                    <h2>Cửa hàng</h2>
                </div>
            </div>
        </div>
    </div>
</div>

<div style="height: 20px"></div>

<!--    <div class="container">-->
<!--        <div class="row justify-content-center">-->
<!--            <div class="col col-md-3">-->
<!--                <label>Loại sản phẩm</label>-->
<!--                <select class="srchTxt" name="selectedType">-->
<!--                    <option value="Tất cả">Tất cả</option>-->
<!--                    <% for(var i = 0; i < list_type.length; i++) { %>-->
<!--                        <option ><%= list_type[i] %> </option>-->
<!--                    <% } %>-->
<!--                </select>-->
<!--            </div>-->
<!--            <div class="col col-md-3">-->
<!--                <label>Nhà sản xuất</label>-->
<!--                <select class="srchTxt" name="selectedBrand">-->
<!--                    <option value="Tất cả">Tất cả</option>-->
<!--                    <% for(var i = 0; i < list_brand.length; i++) { %>-->
<!--                    <option ><%= list_brand[i] %> </option>-->
<!--                    <% } %>-->
<!--                </select>-->
<!--            </div>-->
<!--            <div class="col col-md-3">-->
<!--                <label>Phân loại</label>-->
<!--                <select class="srchTxt" name="selectedGender">-->
<!--                    <option>Tất cả</option>-->
<!--                    <option>nam</option>-->
<!--                    <option>nữ</option>-->
<!--                </select>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<div style="height: 20px"></div>

<div class="container">
    <div class="row justify-content-center">
        <div class="col col-md-3">

                <label>Sắp xếp theo</label>
                <select class="srchTxt" id="sortSelect" onchange="OnSelectSort()">
                    <option value="Giá tăng">Giá tăng </option>
                    <option value="Giá giảm">Giá giảm</option>

<!--                    <input type="submit" value="Áp dụng">-->
                </select>

        </div>
        <div class="col col-md-3">
            <p id="demo"></p>
        </div>
    </div>
    <form method="POST" action="search">
        <div class="row justify-content-center">
            <div class="col col-md-3">
                <label>Loại sản phẩm</label>
                <select class="srchTxt" name="selectedType">
                    <option value="Tất cả">Tất cả</option>
                    <% for(var i = 0; i < list_type.length; i++) { %>
                        <option><%= list_type[i] %> </option>
                    <% } %>
                </select>
            </div>
            <div class="col col-md-3">
                <label>Nhà sản xuất</label>
                <select class="srchTxt" name="selectedBrand">
                    <option value="Tất cả">Tất cả</option>
                    <% for(var i = 0; i < list_brand.length; i++) { %>
                        <option><%= list_brand[i] %> </option>
                    <% } %>
                </select>
            </div>
            <div class="col col-md-3">
                <label>Phân loại</label>
                <select class="srchTxt" name="selectedGender">
                    <option>Tất cả</option>
                    <option>nam</option>
                    <option>nữ</option>
                </select>
            </div>
        </div>
        <div class="row justify-content-center">


            <div class="col-md-6">
                <input class="col-md-12" type="text" name="searchBar" placeholder="Search products...">
            </div>
            <select id="selectType" class="srchTxt">
                <option value="Tất cả">Tất cả</option>
                <% for(var i = 0; i < list_type.length; i++) { var name = "Type" + i; %>
                <option name=name value=<%= list_type[i] %>><%= list_type[i] %> </option>
                <% } %>
            </select>

            <input type="submit" value="Tìm kiếm">

        </div>
    </form>

</div>

<div class="container">

</div>

<div class="single-product-area">
    <div class="zigzag-bottom"></div>
    <div class="container">
        <div class="row">
            <!--                <div class="col-md-3 col-sm-6">-->
            <!--                    <div class="single-shop-product">-->
            <!--                        <div class="product-upper">-->
            <!--                            <a href="/productInfo"><img src="images/product-2.jpg" alt=""></a>-->
            <!--                        </div>-->
            <!--                        <h2><a href="/productInfo"></a></h2>-->
            <!--                        <div class="product-carousel-price">-->
            <!--                            <ins>$899.00</ins> <del>$999.00</del>-->
            <!--                        </div>-->

            <!--                        <div class="product-option-shop">-->
            <!--                            <a class="add_to_cart_button" data-quantity="1" data-product_sku="" data-product_id="70"-->
            <!--                                rel="nofollow" href="/productInfo">Thêm vào giỏ hàng</a>-->
            <!--                        </div>-->
            <!--                    </div>-->
            <!--                </div>-->

            <%
            // var maxIndex = list_items.length - numPage * 12;
            //
            // if (maxIndex >= 12)
            //     maxIndex = 12;

            var maxIndex = (numPage + 1) * 12;

            if(maxIndex > list_items.length)
                maxIndex = list_items.length;


            for(var i = numPage*12; i < maxIndex; i++) {

            %>
                <div class="col-md-3 col-sm-6">
                    <div class="single-shop-product">
                        <div class="product-upper">
                            <a href="<%= list_items[i].url %>"><img alt="Imgur-Upload" src=<%=list_items[i].img%>></a>
                        </div>
                        <h2><a href="<%= list_items[i].url %>"><%= list_items[i].name %></a></h2>
                        <div class="product-carousel-price">
                            <ins><%= list_items[i].price_sale %></ins>
                            <del><%= list_items[i].price %></del>
                        </div>

                        <div class="product-option-shop">
                            <a class="add_to_cart_button" data-quantity="1" data-product_sku="" data-product_id="70"
                               rel="nofollow" href="<%= list_items[i].urlCart %>">Thêm vào giỏ hàng</a>
                        </div>
                    </div>
                </div>
            <% }; %>

        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="product-pagination text-center">
                    <nav>
                        <ul class="pagination">
<!--                            <li>-->
<!--                                <a href="#" aria-label="Previous">-->
<!--                                    <span aria-hidden="true">&laquo;</span>-->
<!--                                </a>-->
<!--                            </li>-->
                            <%
                                var numOfPage = list_items.length/12;
                                for(let i = 0; i < numOfPage; i++){
                            %>
                            <li><a href="/Page?id=<%=i%>"><%=i + 1%></a></li>
                            <%}%>
<!--                            <li>-->
<!--                                <a href="#" aria-label="Next">-->
<!--                                    <span aria-hidden="true">&raquo;</span>-->
<!--                                </a>-->
<!--                            </li>-->
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>
<% include partials/footer.ejs %>
<script type="text/ecmascript">

    var controller = import('./controllers/Cua_hang_controller.js');

    function OnClickNextPage() {
        var idPageNext = "/Page/" + (numPage + 1);
        document.getElementById("btnNext").href = "/Page/" + (numPage + 1);

    }

    function OnSelectSort()
    {
        console.log("begin sort");
        try {
            var boollenOfSelect = document.getElementById("sortSelect").value;
        }catch (e) {
            console.log(e);
        }
        if(boollenOfSelect == "Giá tăng"){
           //controller
            console.table(controller);
            document.getElementById("demo").innerHTML = "You selected: " + boollenOfSelect;
            console.log("Gia Tang");

        }
        else{
            document.getElementById("demo").innerHTML = "You selected: " + boollenOfSelect;
            console.log("Gia giam");
        }

    }
</script>
</body>

</html>